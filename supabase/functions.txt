CREATE OR REPLACE FUNCTION geo_incidents(x numeric, y numeric, distance int)
  RETURNS setof incidents as $$
    select * 
    from incidents
    where ST_DWithin(
            geom, 
            ST_MakePoint(x, y)::geography,
            distance, 
            true 
      );
$$ language sql;