create table rest_areas (
  id bigint generated by default as identity primary key,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,
  name text,
  reference text,
  region text,
  surface text,
  creator text,
  type text,
  bbq boolean default false,
  fuel boolean default false,
  lights boolean default false,
  showers boolean default false,
  toilets boolean default false,
  tables boolean default false,
  power boolean default false,
  wifi boolean default false,
  ligths boolean default false,
  ligthing_type text,
  water boolean default false,
  water_supply text,
  mobile_reception boolean default false,
  length integer,
  width integer,
  dangerous_bays integer default 0,
  dangerous_bays_available integer default 0,
  truck_bays integer default 0,
  truck_bays_available integer default 0,
  images text,
  cover_image text,
  longitude numeric,
  latitude numeric
);

SELECT AddGeometryColumn ('','rest_areas','geom',4326,'POINT',2);

create table ref_data (
  ref text primary key,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,
  data text
);

create table public.profiles (
  id uuid references auth.users not null,
  username text,
  profile text,
  avatar text,
  primary key (id)
);

alter table public.profiles enable row level security;

CREATE TABLE bookmarks (
  id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  ref_data_ref text references categories,
  uuid references auth.users not null,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,
);

alter table public.bookmarks enable row level security;

CREATE TABLE chats (
  id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  uuid references auth.users,
  name TEXT NOT NULL,
  is_attached BOOLEAN DEFAULT FALSE,
  rest_area_id bigint references public.rest_areas,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,
);

alter table public.chats enable row level security;

CREATE TABLE messages (
  id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  uuid references auth.users not null,
  chat references public.chats not null,
  text TEXT NOT NULL,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,
);

alter table public.messages enable row level security;